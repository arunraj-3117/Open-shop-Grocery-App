<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grocery Budget Combos</title>
<style>
  body { font-family: Arial, sans-serif; background: #f9faff; padding: 20px; }
  h2 { text-align: center; margin-bottom: 20px; }
  input, button { padding: 10px 15px; font-size: 16px; margin: 5px; }
  button { cursor: pointer; background: #007BFF; color: white; border: none; border-radius: 5px; }
  button:hover { background: #0056b3; }
  .combination { background: white; padding: 15px; margin: 20px 0; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  .product-list { display: flex; gap: 15px; flex-wrap: wrap; }
  .product { border: 1px solid #ddd; padding: 10px; border-radius: 5px; width: 150px; text-align: center; }
  .product img { width: 100%; height: 100px; object-fit: cover; border-radius: 5px; }
  .order-btn { margin-top: 10px; padding: 12px 20px; background: #28a745; color: white; font-weight: bold; border-radius: 6px; border: none; }
  .order-btn:hover { background: #1e7e34; }
    .description-box {
    max-width: 700px;
    margin: 0 auto 30px auto;
    background: #e3f2fd; /* soft blue background */
    border-left: 6px solid #1976d2; /* bright blue left border */
    padding: 20px 25px;
    color: #0d47a1;
    font-size: 17px;
    font-weight: 500;
    line-height: 1.5;
    box-shadow: 0 2px 6px rgba(25, 118, 210, 0.2);
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .description-box svg {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    fill: #1976d2;
  }
</style>
</head>
<body>

<h2>Find Your Perfect Grocery Combos</h2>
<div class="description-box">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm.25 15h-1.5v-1.5h1.5zm0-3h-1.5V7h1.5z"/>
  </svg>
  <p>
    Enter your budget above to instantly discover customized grocery combos that fit your price range perfectly. 
    This smart tool suggests carefully curated product sets so you can maximize your shopping value while staying within budget. 
    Simply browse the combos, and order your favorite bundle with one click!
  </p>
</div>
<div style="text-align:center;">
  <input id="budgetInput" type="number" placeholder="Enter your budget (â‚¹)" />
  <button id="searchBtn">Search</button>
</div>

<div id="results"></div>

<script>
const products = [
  { name: "Rice", category: "grains", imageUrl: "images/rice.jpeg", price: 50, unit: "per kg" },
  { name: "Wheat flour (Atta)", category: "grains", imageUrl: "images/wheatflour.jpg", price: 40, unit: "per kg" },
  { name: "Lentils (Toor dal,etc.)", category: "grains", imageUrl: "images/Lentils.jpeg", price: 120, unit: "per kg" },
  { name: "Sugar", category: "grains", imageUrl: "images/sugar.jpg", price: 45, unit: "per kg" },
  { name: "Salt", category: "grains", imageUrl: "images/salt.jpeg", price: 20, unit: "per kg" },
  { name: "Cooking oil", category: "grains", imageUrl: "images/oil.jpg", price: 150, unit: "per litre" },
  { name: "Semolina (Rava)", category: "grains", imageUrl: "images/rava.jpg", price: 60, unit: "per kg" },
  { name: "Poha (Flattened rice)", category: "grains", imageUrl: "images/flarice.jpg", price: 55, unit: "per kg" },
  { name: "Maida (Refined flour)", category: "grains", imageUrl: "images/maida.jpeg", price: 45, unit: "per kg" },
  { name: "Besan (Gram flour)", category: "grains", imageUrl: "images/gram.webp", price: 70, unit: "per kg" },
  { name: "Turmeric powder", category: "spices", imageUrl: "images/turmeric.jpeg", price: 100, unit: "per 100g" },
  { name: "Red chili powder", category: "spices", imageUrl: "images/rcp.jpeg", price: 90, unit: "per 100g" },
  { name: "Cumin seeds", category: "spices", imageUrl: "images/cumin.webp", price: 110, unit: "per 100g" },
  { name: "Mustard seeds", category: "spices", imageUrl: "images/mustard.jpeg", price: 80, unit: "per 100g" },
  { name: "Garam masala", category: "spices", imageUrl: "images/garam.webp", price: 120, unit: "per 100g" },
  { name: "Potatoes", category: "veggies", imageUrl: "images/potato.jpeg", price: 30, unit: "per kg" },
  { name: "Onions", category: "veggies", imageUrl: "images/onion.png", price: 25, unit: "per kg" },
  { name: "Tomatoes", category: "veggies", imageUrl: "images/tomato.webp", price: 40, unit: "per kg" },
  { name: "Garlic", category: "veggies", imageUrl: "images/gc.webp", price: 60, unit: "per 100g" },
  { name: "Green chilies", category: "veggies", imageUrl: "images/gp.jpeg", price: 20, unit: "per 100g" },
  { name: "Seasonal fruits (Bananas, Apples, etc.)", category: "veggies", imageUrl: "images/ab.jpg", price: 80, unit: "per kg" },
  { name: "Leafy greens (Spinach, Coriander, etc.)", category: "veggies", imageUrl: "images/spinach.webp", price: 30, unit: "per bunch" },
  { name: "Milk", category: "dairy", imageUrl: "images/milky.jpeg", price: 50, unit: "per litre" },
  { name: "Curd/Yogurt", category: "dairy", imageUrl: "images/curd.jpg", price: 45, unit: "per 500g" },
  { name: "Eggs", category: "dairy", imageUrl: "images/egg.jpg", price: 60, unit: "per dozen" },
  { name: "Paneer or Tofu", category: "dairy", imageUrl: "images/paneer.webp", price: 150, unit: "per 500g" },
  { name: "Butter or Ghee", category: "dairy", imageUrl: "images/ghee.jpeg", price: 250, unit: "per 500g" }
];

function findCombinations(arr, budget, start, currentCombo, result) {
  let sum = currentCombo.reduce((acc, p) => acc + p.price, 0);
  if (sum > budget) return;
  if (sum === budget) {
    result.push([...currentCombo]);
    return; // Don't continue beyond exact budget
  }

  for (let i = start; i < arr.length; i++) {
    currentCombo.push(arr[i]);
    findCombinations(arr, budget, i + 1, currentCombo, result);
    currentCombo.pop();
  }
}


document.getElementById('searchBtn').addEventListener('click', () => {
  const budget = parseInt(document.getElementById('budgetInput').value);
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';

  if (isNaN(budget) || budget <= 0) {
    alert('Please enter a valid budget.');
    return;
  }

  const combos = [];
  findCombinations(products, budget, 0, [], combos);

  if (combos.length === 0) {
    resultsDiv.innerHTML = '<p style="color:red; text-align:center;">No combos found within your budget.</p>';
    return;
  }

  combos.forEach((combo, idx) => {
    const comboDiv = document.createElement('div');
    comboDiv.className = 'combination';

    const comboTitle = document.createElement('h3');
    comboTitle.textContent = `Combo ${idx + 1}`;
    comboDiv.appendChild(comboTitle);

    const productList = document.createElement('div');
    productList.className = 'product-list';

    combo.forEach(prod => {
      const pDiv = document.createElement('div');
      pDiv.className = 'product';

      const img = document.createElement('img');
      img.src = prod.imageUrl || 'https://via.placeholder.com/150x100?text=No+Image';
      img.alt = prod.name;

      const name = document.createElement('p');
      name.textContent = prod.name;

      const price = document.createElement('p');
      price.textContent = `â‚¹${prod.price} (${prod.unit})`;

      pDiv.appendChild(img);
      pDiv.appendChild(name);
      pDiv.appendChild(price);

      productList.appendChild(pDiv);
    });

    comboDiv.appendChild(productList);

    // Create order button
    const orderBtn = document.createElement('button');
    orderBtn.className = 'order-btn';
    orderBtn.textContent = 'Total Product Order ðŸ›’';

    orderBtn.addEventListener('click', () => {
      // Serialize combo into JSON and encodeURIComponent
      const orderData = combo.map(p => ({
        name: p.name,
        price: p.price,
        unit: p.unit
      }));
      const orderString = encodeURIComponent(JSON.stringify(orderData));
      // Redirect with order data in URL
      window.location.href = `order1.html?order=${orderString}`;
    });

    comboDiv.appendChild(orderBtn);

    resultsDiv.appendChild(comboDiv);
  });
});
</script>

</body>
</html>
